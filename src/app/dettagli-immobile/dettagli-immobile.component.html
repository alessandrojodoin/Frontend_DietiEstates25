@if(immobileTrovato){



<div class="details-page">

  <header class="page-header">
    <h1 class="title">{{ immobile.nome }}</h1>
  </header>

  <section class="gallery-row">

    <div class="thumb left-thumb" aria-hidden="true">
      <img [src]="'http://localhost:8080/api/1.0/immobile/' + this.immobile.id + '/image/' + imageIds[((currentlyDisplayedImageIndex - 1 + this.imageIds.length) % this.imageIds.length)]" >
    </div>

    <div class="main-image">
      <img [src]="'http://localhost:8080/api/1.0/immobile/' + this.immobile.id + '/image/' + imageIds[currentlyDisplayedImageIndex]" >

      <button class="nav prev"  (click)="previousImage()"  aria-hidden="true">â€¹</button>
      <button class="nav next" (click)="nextImage()" aria-hidden="true">â€º</button>
    </div>
    <div class="thumb right-thumb" aria-hidden="true">
      <img [src]="'http://localhost:8080/api/1.0/immobile/' + this.immobile.id + '/image/' + imageIds[((currentlyDisplayedImageIndex + 1 + this.imageIds.length) % this.imageIds.length)]" >
    </div>
  </section>

  <section class="descrizione">
    <h3>Descrizione </h3>
    <p class="desc-bubble">
      {{ immobile.descrizione }}
    </p>
  </section>

  <hr class="sep">

  <section class="caratteristiche">
    <h2>Caratteristiche</h2><br>
    <div class="char-box">
      <div class="char-grid">
          @for(tag of immobile.tagDescrizione; track tag){
            <div class="char-item"></div>
            <div class="icon-square"></div>
            <div class="char-title">
              
                  {{ tag.nome | titlecase }}:   <!--compare qui la superficie-->
                
            </div>
            @if(tag.type === 'Boolean' && tag.valore === "true"){
              <div class="char-value">SÃ¬</div>
            } @else if(tag.type === 'Boolean' && tag.valore === "false"){
              <div class="char-value">No</div>
            } @else {
              <div class="char-value">{{ tag.valore }}</div>
            }
          }
      </div>
    </div>
  </section>

  <hr class="sep">
@if(auth.getUserType() === 'Cliente'){
  <section class="prezzo-row">
    <h2>Informazioni sul prezzo</h2>
    <div class="price-info">
      <div class="price-left">
        <div><strong>Prezzo:</strong> {{ immobile.prezzo | number:'1.0-0'}}â‚¬</div>
        <div><strong>Prezzo al mÂ²:</strong> {{ (immobile.prezzo / immobile.quadratura) | number:'1.0-0' }}â‚¬</div>
        <div class="condo"><strong>Spese Condominiali:</strong> {{ immobile.speseCondominiali | number:'1.0-0'}}â‚¬</div>
      </div>
      <div class="price-action">
        <button class="btn-teal" (click)="showOffer = true">ðŸ’³ Proponi Prezzo</button>
      </div>
      <!--PROVA PROVA-->
    </div>
  </section>

    <div class="popup-overlay" *ngIf="showOffer" (click)="closeOfferta()">
  <div class="popup-content" (click)="$event.stopPropagation()">
    <button class="close-popup" (click)="closeOfferta()">X</button>
    <h2>Offerta</h2>

<form [formGroup]="offertaValueForm">
    <div class="offer-option">
      <label for="value">Fai qui la tua offerta:</label>
      <div class="offer-price">
        <input id="value" formControlName="value" placeholder="Fai un'offerta...">
      </div>
    </div>
    <button class="ok-offer-btn" (click)="applyOfferta()">Invia Offerta</button>
</form>
</div>
    
  </div>


}
  <hr class="sep">

  <section class="localita">
    <h2>LocalitÃ </h2>
    <div class="map-wrapper">
      <div id="map" map-id="7e09b66dcfaa788fb9c8f8bd"></div>
    </div>
    <div class="address">
      <div><strong>CittÃ :</strong> {{ immobile.indirizzo.citta }}</div>
      <div><strong>Provincia:</strong> {{ immobile.indirizzo.provincia }}</div>
      <div><strong>Indirizzo:</strong> {{ immobile.indirizzo.via }}</div>
    </div>
  </section>

  <hr class="sep">

  <section class="contatti">
    <h4>Contatti Agente Immobiliare</h4>
    <div class="agent-line">
      <div><strong>Nome:</strong> {{immobile.agenteImmobiliare.nome + " " + immobile.agenteImmobiliare.cognome }}</div>
      <div><strong>Numero di telefono:</strong> {{immobile.agenteImmobiliare.telefono}}</div>
      <div><strong>Email:</strong> {{ immobile.agenteImmobiliare.email }}</div>
    </div>
@if(auth.getUserType() === 'Cliente'){
    <button class="btn-visit">ðŸ“… Prenota Visita</button>
}
  </section>
</div>
}